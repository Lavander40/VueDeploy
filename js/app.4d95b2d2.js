(function(){"use strict";var t={5136:function(t,e,o){var s=o(9242),n=o(3396);const a={class:"app"};function i(t,e,o,s,i,r){const l=(0,n.up)("nav-bar"),c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(l),(0,n._)("div",a,[(0,n.Wm)(c)])],64)}o(7658);const r={class:"navbar"};function l(t,e,o,s,a,i){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("h1",{onClick:e[0]||(e[0]=e=>t.$router.push("/"))},"My News Page"),(0,n.Wm)(l,{to:"/posts"},{default:(0,n.w5)((()=>[(0,n.Uk)("News Page")])),_:1}),(0,n.Wm)(l,{to:"/storage"},{default:(0,n.w5)((()=>[(0,n.Uk)("Storage Page")])),_:1}),(0,n.Wm)(l,{to:"/composition"},{default:(0,n.w5)((()=>[(0,n.Uk)("Composition Page")])),_:1})])}var c={name:"NavBar"},u=o(89);const p=(0,u.Z)(c,[["render",l],["__scopeId","data-v-55fcb394"]]);var d=p,h={name:"App",components:{NavBar:d}};const m=(0,u.Z)(h,[["render",i]]);var g=m;function v(t,e,o,s,a,i){return(0,n.wg)(),(0,n.iD)("button",null,[(0,n.WI)(t.$slots,"default",{},void 0,!0)])}var f={name:"CustomBtn"};const y=(0,u.Z)(f,[["render",v],["__scopeId","data-v-8a330cc2"]]);var w=y;const P=["value"];function _(t,e,o,s,a,i){return(0,n.wg)(),(0,n.iD)("input",{class:"input",type:"text",value:o.value,onInput:e[0]||(e[0]=(...t)=>i.updateInput&&i.updateInput(...t))},null,40,P)}var C={name:"CustomInput",props:{value:[String,Number]},methods:{updateInput(t){this.$emit("update:value",t.target.value)}}};const b=(0,u.Z)(C,[["render",_],["__scopeId","data-v-04e5e3eb"]]);var S=b;function k(t,e,o,a,i,r){return t.show?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"dialog",onClick:e[1]||(e[1]=(...e)=>t.close&&t.close(...e))},[(0,n._)("div",{class:"dialog__window",onClick:e[0]||(e[0]=(0,s.iM)((()=>{}),["stop"]))},[(0,n.WI)(t.$slots,"default",{},void 0,!0)])])):(0,n.kq)("",!0)}var L={props:{show:{type:Boolean,default:!1}},methods:{close(){this.$emit("update:show",!1)}}},D={name:"CustomDialog",mixins:[L]};const B=(0,u.Z)(D,[["render",k],["__scopeId","data-v-591955f8"]]);var I=B,W=o(7139);const O=t=>((0,n.dD)("data-v-3b7a786c"),t=t(),(0,n.Cn)(),t),U=["value"],T=O((()=>(0,n._)("option",{disabled:"",value:""},"Choose from",-1))),Z=["value"];function j(t,e,o,s,a,i){return(0,n.wg)(),(0,n.iD)("select",{value:o.value,onChange:e[0]||(e[0]=(...t)=>i.changeOption&&i.changeOption(...t))},[T,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.options,(t=>((0,n.wg)(),(0,n.iD)("option",{key:t.value,value:t.value},(0,W.zw)(t.name),9,Z)))),128))],40,U)}var x={name:"CustomSelect",props:{value:{type:String},options:{type:Array,default:()=>[]}},methods:{changeOption(t){this.$emit("update:value",t.target.value)}}};const M=(0,u.Z)(x,[["render",j],["__scopeId","data-v-3b7a786c"]]);var $=M,N=[w,S,I,$];const H=(0,n._)("h2",null,"Welcome to Main Page",-1),V=(0,n._)("div",null,[(0,n._)("br"),(0,n.Uk)("Астаев Кирилл Алексеевич БСБО-03-20")],-1),z=[H,V];function E(t,e,o,s,a,i){return(0,n.wg)(),(0,n.iD)("div",null,z)}var F={name:"MainPage"};const A=(0,u.Z)(F,[["render",E]]);var R=A,Y=o(2483);const q=(0,n._)("h2",null,"News page",-1),K={class:"app_btn"},Q={key:1,style:{position:"center","font-size":"18pt"}},G={class:"page-wrapper"},J=["onClick"];function X(t,e,o,a,i,r){const l=(0,n.up)("custom-btn"),c=(0,n.up)("custom-input"),u=(0,n.up)("custom-select"),p=(0,n.up)("post-create"),d=(0,n.up)("custom-dialog"),h=(0,n.up)("post-list"),m=(0,n.Q2)("intersection");return(0,n.wg)(),(0,n.iD)("div",null,[q,(0,n._)("div",K,[(0,n.Wm)(l,{onClick:r.showDialog},{default:(0,n.w5)((()=>[(0,n.Uk)("Create post")])),_:1},8,["onClick"]),(0,n.Wm)(c,{value:i.searchBy,"onUpdate:value":e[0]||(e[0]=t=>i.searchBy=t),placeholder:"Search...",style:{"flex-grow":"1"}},null,8,["value"]),(0,n.Wm)(u,{value:i.selectedSort,"onUpdate:value":e[1]||(e[1]=t=>i.selectedSort=t),options:i.sortOptions},null,8,["value","options"])]),(0,n.Wm)(d,{show:i.dialogVisibility,"onUpdate:show":e[2]||(e[2]=t=>i.dialogVisibility=t)},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{onCreate:r.addPost},null,8,["onCreate"])])),_:1},8,["show"]),i.postLoading?((0,n.wg)(),(0,n.iD)("strong",Q,"Loading...")):((0,n.wg)(),(0,n.j4)(h,{key:0,posts:r.findInSort,onRemove:r.removePost},null,8,["posts","onRemove"])),(0,n._)("div",G,[(0,n.wy)((0,n._)("div",{class:"page-element",onClick:e[3]||(e[3]=t=>r.changePage(this.currentPage-1))},"<",512),[[s.F8,1!==i.currentPage]]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.pagesTotal,(t=>((0,n.wg)(),(0,n.iD)("div",{class:(0,W.C_)(["page-element",{"current-page":t===i.currentPage}]),key:t,onClick:e=>r.changePage(t)},(0,W.zw)(t),11,J)))),128)),(0,n.wy)((0,n._)("div",{class:"page-element",onClick:e[4]||(e[4]=t=>r.changePage(this.currentPage+1))},">",512),[[s.F8,i.currentPage!==i.pagesTotal]])]),(0,n.wy)((0,n._)("div",null,null,512),[[m,r.fetchPosts]])])}const tt=t=>((0,n.dD)("data-v-3a2be666"),t=t(),(0,n.Cn)(),t),et=tt((()=>(0,n._)("h3",null,"Post create",-1))),ot=tt((()=>(0,n._)("br",null,null,-1))),st=tt((()=>(0,n._)("br",null,null,-1))),nt={style:{display:"flex","justify-content":"space-between"}};function at(t,e,o,a,i,r){const l=(0,n.up)("custom-input"),c=(0,n.up)("custom-btn");return(0,n.wg)(),(0,n.iD)("form",{onSubmit:e[2]||(e[2]=(0,s.iM)((()=>{}),["prevent"]))},[et,(0,n.Wm)(l,{value:i.post.title,"onUpdate:value":e[0]||(e[0]=t=>i.post.title=t),placeholder:"Title"},null,8,["value"]),ot,(0,n.Wm)(l,{value:i.post.body,"onUpdate:value":e[1]||(e[1]=t=>i.post.body=t),placeholder:"Body"},null,8,["value"]),st,(0,n._)("div",nt,[(0,n.Wm)(c,{onClick:r.addPost},{default:(0,n.w5)((()=>[(0,n.Uk)("Add post")])),_:1},8,["onClick"]),(0,n.Wm)(c,{onClick:r.cancel},{default:(0,n.w5)((()=>[(0,n.Uk)("Cancel")])),_:1},8,["onClick"])])],32)}var it={name:"PostCreate",data(){return{post:{title:"",body:""}}},methods:{addPost(){this.post.id=Date.now()%1e3,this.$emit("create",this.post),this.post={title:"",body:""}},cancel(){this.$emit("close")}}};const rt=(0,u.Z)(it,[["render",at],["__scopeId","data-v-3a2be666"]]);var lt=rt;const ct=t=>((0,n.dD)("data-v-0d8db532"),t=t(),(0,n.Cn)(),t),ut={class:"list"},pt=ct((()=>(0,n._)("h3",null,"Posts Listing",-1))),dt={class:"list"},ht=ct((()=>(0,n._)("h3",null,"No posts found",-1))),mt=[ht];function gt(t,e,o,a,i,r){const l=(0,n.up)("post-item");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.wy)((0,n._)("div",ut,[pt,(0,n.Wm)(s.W3,{name:"post-list"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.posts,(e=>((0,n.wg)(),(0,n.j4)(l,{key:e.id,post:e,onRemove:o=>t.$emit("remove",e)},null,8,["post","onRemove"])))),128))])),_:1})],512),[[s.F8,o.posts.length]]),(0,n.wy)((0,n._)("div",dt,mt,512),[[s.F8,!o.posts.length]])],64)}const vt=t=>((0,n.dD)("data-v-71e8c212"),t=t(),(0,n.Cn)(),t),ft={class:"post"},yt=vt((()=>(0,n._)("br",null,null,-1))),wt=vt((()=>(0,n._)("strong",null,"Содержание:",-1))),Pt=vt((()=>(0,n._)("br",null,null,-1))),_t={class:"post_btn"};function Ct(t,e,o,s,a,i){const r=(0,n.up)("custom-btn");return(0,n.wg)(),(0,n.iD)("div",ft,[(0,n._)("div",null,[(0,n._)("div",null,[(0,n._)("strong",null,(0,W.zw)(o.post.id)+". Название:",1),(0,n.Uk)(" "+(0,W.zw)(o.post.title),1)]),yt,(0,n._)("div",null,[wt,(0,n.Uk)(" "+(0,W.zw)(o.post.body),1)]),Pt]),(0,n._)("div",_t,[(0,n.Wm)(r,{onClick:e[0]||(e[0]=e=>t.$router.push(`/posts/${o.post.id}`))},{default:(0,n.w5)((()=>[(0,n.Uk)("Open")])),_:1}),(0,n.Wm)(r,{onClick:e[1]||(e[1]=e=>t.$emit("remove",o.post))},{default:(0,n.w5)((()=>[(0,n.Uk)("Delete")])),_:1})])])}var bt={name:"PostItem",components:{CustomBtn:w},props:{post:{type:Object,required:!0}}};const St=(0,u.Z)(bt,[["render",Ct],["__scopeId","data-v-71e8c212"]]);var kt=St,Lt={name:"PostList",components:{PostItem:kt},props:{posts:{type:Array,required:!0}},emits:["remove"]};const Dt=(0,u.Z)(Lt,[["render",gt],["__scopeId","data-v-0d8db532"]]);var Bt=Dt,It=o(4161),Wt={name:"App",components:{CustomInput:S,CustomSelect:$,CustomBtn:w,PostList:Bt,PostCreate:lt,CustomDialog:I},data(){return{posts:[],dialogVisibility:!1,postLoading:!1,selectedSort:"",searchBy:"",currentPage:0,postLimit:10,pagesTotal:0,sortOptions:[{value:"title",name:"By Name"},{value:"body",name:"By Content"}]}},methods:{addPost(t){this.posts.push(t),this.dialogVisibility=!1},removePost(t){this.posts=this.posts.filter((e=>e.id!==t.id))},showDialog(){this.dialogVisibility=!0},changePage(t){this.currentPage=t},async fetchPage(){try{this.postLoading=!0;const t=await It.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:this.currentPage,_limit:this.postLimit}});this.pagesTotal=Math.ceil(t.headers["x-total-count"]/this.postLimit),this.posts=t.data}catch(t){alert("Error fetch")}finally{this.postLoading=!1}},async fetchPosts(){try{this.currentPage+=1;const t=await It.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:this.currentPage,_limit:this.postLimit}});this.pagesTotal=Math.ceil(t.headers["x-total-count"]/this.postLimit),this.posts=[...this.posts,...t.data]}catch(t){alert("Error fetch")}}},computed:{sortPosts(){return[...this.posts].sort(((t,e)=>t[this.selectedSort]?.localeCompare(e[this.selectedSort])))},findInSort(){return this.sortPosts.filter((t=>t.title.toLowerCase().includes(this.searchBy.toLowerCase())))}},watch:{currentPage(){this.fetchPage()},selectedSort(t){this.posts.sort(((e,o)=>e[t]?.localeCompare(o[t])))}},mounted(){this.fetchPosts()}};const Ot=(0,u.Z)(Wt,[["render",X]]);var Ut=Ot;function Tt(t,e,o,s,a,i){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h2",null,"Post "+(0,W.zw)(t.$route.params.id),1)])}var Zt={name:"FullPost"};const jt=(0,u.Z)(Zt,[["render",Tt]]);var xt=jt;const Mt=(0,n._)("h2",null,"News page",-1),$t={class:"app_btn"},Nt={key:1,style:{position:"center","font-size":"18pt"}};function Ht(t,e,o,s,a,i){const r=(0,n.up)("custom-btn"),l=(0,n.up)("custom-input"),c=(0,n.up)("custom-select"),u=(0,n.up)("post-create"),p=(0,n.up)("custom-dialog"),d=(0,n.up)("post-list"),h=(0,n.Q2)("intersection");return(0,n.wg)(),(0,n.iD)(n.HY,null,[Mt,(0,n._)("div",$t,[(0,n.Wm)(r,{onClick:i.showDialog},{default:(0,n.w5)((()=>[(0,n.Uk)("Create post")])),_:1},8,["onClick"]),(0,n.Wm)(l,{value:t.searchBy,"onUpdate:value":t.setSearchBy,placeholder:"Search...",style:{"flex-grow":"1"}},null,8,["value","onUpdate:value"]),(0,n.Wm)(c,{value:t.selectedSort,"onUpdate:value":t.setSelectedSort,options:t.sortOptions},null,8,["value","onUpdate:value","options"])]),(0,n.Wm)(p,{show:a.dialogVisibility,"onUpdate:show":e[0]||(e[0]=t=>a.dialogVisibility=t)},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onCreate:i.addPost,onClose:i.hideDialog},null,8,["onCreate","onClose"])])),_:1},8,["show"]),t.postLoading?((0,n.wg)(),(0,n.iD)("strong",Nt,"Loading...")):((0,n.wg)(),(0,n.j4)(d,{key:0,posts:t.findInSort,onRemove:i.removePost},null,8,["posts","onRemove"])),(0,n.wy)((0,n._)("div",null,null,512),[[h,t.fetchPosts]])],64)}var Vt=o(65),zt={name:"App",components:{PostList:Bt,PostCreate:lt},data(){return{dialogVisibility:!1}},methods:{...(0,Vt.OI)({setCurrentPage:"post/setCurrentPage",setSelectedSort:"post/setSelectedSort",setSearchBy:"post/setSearchBy"}),...(0,Vt.nv)({fetchPosts:"post/fetchPosts",fetchPage:"post/fetchPage",filterPost:"post/filterPost"}),addPost(t){this.posts.push(t),this.hideDialog()},removePost(t){this.filterPost(t.id)},showDialog(){this.dialogVisibility=!0},hideDialog(){this.dialogVisibility=!1}},computed:{...(0,Vt.rn)({posts:t=>t.post.posts,postLoading:t=>t.post.postLoading,selectedSort:t=>t.post.selectedSort,searchBy:t=>t.post.searchBy,currentPage:t=>t.post.currentPage,postLimit:t=>t.post.postLimit,pagesTotal:t=>t.post.pagesTotal,sortOptions:t=>t.post.sortOptions}),...(0,Vt.Se)({sortPosts:"post/sortPosts",findInSort:"post/findInSort"})},watch:{},mounted(){this.fetchPosts()}};const Et=(0,u.Z)(zt,[["render",Ht]]);var Ft=Et;const At=(0,n._)("h2",null,"News page",-1),Rt={class:"app_btn"},Yt={key:1,style:{position:"center","font-size":"18pt"}};function qt(t,e,o,s,a,i){const r=(0,n.up)("custom-input"),l=(0,n.up)("custom-select"),c=(0,n.up)("post-list");return(0,n.wg)(),(0,n.iD)("div",null,[At,(0,n._)("div",Rt,[(0,n.Wm)(r,{value:s.searchBy,"onUpdate:value":e[0]||(e[0]=t=>s.searchBy=t),placeholder:"Search...",style:{"flex-grow":"1"}},null,8,["value"]),(0,n.Wm)(l,{value:s.selectedSort,"onUpdate:value":e[1]||(e[1]=t=>s.selectedSort=t),options:a.sortOptions},null,8,["value","options"])]),s.postLoading?((0,n.wg)(),(0,n.iD)("strong",Yt,"Loading...")):((0,n.wg)(),(0,n.j4)(c,{key:0,posts:s.findInSorted},null,8,["posts"]))])}var Kt=o(4870);function Qt(t){const e=(0,Kt.iH)([]),o=(0,Kt.iH)(!0),s=(0,Kt.iH)(0),a=async()=>{try{const o=await It.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:1,_limit:t}});s.value=Math.ceil(o.headers["x-total-count"]/t),e.value=o.data}catch(n){alert("Error fetch")}finally{o.value=!1}};return(0,n.bv)(a),{posts:e,postLoading:o,pagesTotal:s}}function Gt(t){const e=(0,Kt.iH)(""),o=(0,n.Fl)((()=>[...t.value].sort(((t,o)=>t[e.value]?.localeCompare(o[e.value])))));return{selectedSort:e,sortPosts:o}}function Jt(t){const e=(0,Kt.iH)(""),o=(0,n.Fl)((()=>t.value.filter((t=>t.title.toLowerCase().includes(e.value.toLowerCase())))));return{searchBy:e,findInSorted:o}}var Xt={name:"App",components:{CustomInput:S,CustomSelect:$,PostList:Bt},data(){return{dialogVisibility:!1,sortOptions:[{value:"title",name:"By Name"},{value:"body",name:"By Content"}]}},setup(t){const{posts:e,postLoading:o,pagesTotal:s}=Qt(10),{selectedSort:n,sortPosts:a}=Gt(e),{searchBy:i,findInSorted:r}=Jt(a);return{posts:e,postLoading:o,pagesTotal:s,selectedSort:n,sortPosts:a,searchBy:i,findInSorted:r}}};const te=(0,u.Z)(Xt,[["render",qt]]);var ee=te;const oe=[{path:"/",component:R},{path:"/posts",component:Ut},{path:"/posts/:id",component:xt},{path:"/storage",component:Ft},{path:"/composition",component:ee}],se=(0,Y.p7)({routes:oe,history:(0,Y.PO)("/")});var ne=se;const ae={state:()=>({posts:[],postLoading:!1,selectedSort:"",searchBy:"",currentPage:0,postLimit:10,pagesTotal:0,sortOptions:[{value:"title",name:"By Name"},{value:"body",name:"By Content"}]}),getters:{sortPosts(t){return[...t.posts].sort(((e,o)=>e[t.selectedSort]?.localeCompare(o[t.selectedSort])))},findInSort(t,e){return e.sortPosts.filter((e=>e.title.toLowerCase().includes(t.searchBy.toLowerCase())))}},mutations:{setPosts(t,e){t.posts=e},setPostLoading(t,e){t.postLoading=e},setCurrentPage(t,e){t.postCurrentPage=e},setPagesTotal(t,e){t.pagesTotal=e},setSelectedSort(t,e){t.selectedSort=e},setSearchBy(t,e){t.searchBy=e}},actions:{async fetchPage({state:t,commit:e}){try{e("setPostLoading",!0);const o=await It.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:t.currentPage,_limit:t.postLimit}});e("setPagesTotal",Math.ceil(o.headers["x-total-count"]/t.postLimit)),e("setPosts",o.data)}catch(o){alert("Error fetch")}finally{e("setPostLoading",!1)}},async fetchPosts({state:t,commit:e}){try{e("setCurrentPage",t.currentPage+=1);const o=await It.Z.get("https://jsonplaceholder.typicode.com/posts",{params:{_page:t.currentPage,_limit:t.postLimit}});e("setPagesTotal",Math.ceil(o.headers["x-total-count"]/t.postLimit)),e("setPosts",[...t.posts,...o.data])}catch(o){alert("Error fetch")}},filterPost({state:t},e){t.posts=t.posts.filter((t=>t.id!==e))}},namespaced:!0};var ie=(0,Vt.MT)({modules:{post:ae}}),re={name:"intersection",mounted(t,e){let o={rootMargin:"0px",threshold:1},s=new IntersectionObserver(((t,o)=>{t[0].isIntersecting&&e.value}),o);s.observe(t)}},le=[re];const ce=(0,s.ri)(g);N.forEach((t=>{ce.component(t.name,t)})),le.forEach((t=>{ce.directive(t.name,t)})),ce.use(ne).use(ie).mount("#app")}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,o),a.exports}o.m=t,function(){var t=[];o.O=function(e,s,n,a){if(!s){var i=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],a=t[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&a||i>=a)&&Object.keys(o.O).every((function(t){return o.O[t](s[l])}))?s.splice(l--,1):(r=!1,a<i&&(i=a));if(r){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[s,n,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,a,i=s[0],r=s[1],l=s[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(l)var u=l(o)}for(e&&e(s);c<i.length;c++)a=i[c],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(u)},s=self["webpackChunkvue"]=self["webpackChunkvue"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(5136)}));s=o.O(s)})();
//# sourceMappingURL=app.4d95b2d2.js.map